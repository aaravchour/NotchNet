This is a tutorial on how to farm pumpkins and melons, both manually and automatically. For other types of farming see Farming.

Melons and pumpkins use essentially the same mechanics for growth and can be easily farmed with the same techniques. Once the plants are mature, they provide a steady supply of fruit for your needs. Surprisingly, water is not needed to grow pumpkins or melons. When planted, they create a stalk that starts out short, but grows and becomes yellow as it matures. Only mature stalks can grow pumpkins and melons.

To begin farming, seeds must first be found. You can either find seeds in chests or find whole melons or pumpkins and craft them into seeds.

Pumpkins can be found growing "wild" in any biome with grass or in taiga villages.
Melons can be found growing "wild" in jungles or in savanna villages.
Pumpkin and melon seeds can both be found in minecarts with chests inside mineshafts, and in chests in dungeons.
If you do have a whole pumpkin or melon, but no seeds, simply place the pumpkin in a crafting grid, which yields 4 seeds, or, alternatively, place the pumpkin somewhere and use shears on it. The melon drops melon slices when mined, yielding 1 seed each when putting in a crafting area. 
On average, it takes around 272 seconds (4 minutes, 31 seconds) for each stem to generate fruit (be it a Pumpkin or a Melon).
Note: Pre-1.13 players must put the whole pumpkin in a crafting area and craft it into 4 seeds.

The growth rate of melon and pumpkin stems and the spawning of melon and pumpkin fruit is determined by the same growth rate algorithm as for wheat, carrots, and potatoes. The stem itself has 8 phases of growth until maturity. Bone meal may be used to accelerate growth.
The attempt to grow a fruit happens when the mature stem would grow again (to "phase 9") and is not already adjacent to an instance of its fruit. First one of the four sides is chosen. If this space is suitable (empty with dirt, coarse dirt, rooted dirt, grass block, farmland, podzol, mycelium, moss block, mud or muddy mangrove roots beneath) the fruit is created. Bone meal does not force fruit production.

Thus, hydrated farmland adjacent increases growth rates of stems and production rate of fruit, having the same stem type adjacent to the stem (unless in rows) reduces growth rates and fruit production, light level 9 in the block above the stem is required for any growth, etc.
The maximum probability of fruit production from a single stem would, therefore, require a stem in hydrated farmland with hydrated farmland on all eight sides, with four of those farmland blocks remaining unplanted (the corners may be planted with some other crop). Practical farms often accept reduced per-plant production rates (, , or even  of the maximum) for greater space efficiency and ease of harvest.
Both sorts of fruit revert farmland below them to dirt when they grow. Pumpkins can most easily be harvested with an axe, and drop whole as items. Melons can be broken quickest using an axe. They also break faster using a sword but at the cost of double durability. While melons grow as blocks, the melons are broken into 37 slices by harvesting (unless a Silk Touch tool is used). In both cases, the harvested fruit can be crafted back into seeds. Harvesting mature stems also produces seeds (14 per stem), but it is faster to wait for the already-mature stem to grow a fruit than to regrow a mature stem from seed.

This section contains suitable layouts for farms that must be manually harvested. The percentages given are space efficiencies. Parenthesized values are theoretical maximums, which assume that there are free blocks surrounding the farm for the border plants to place melons. The maximum possible efficiency for any melon or pumpkin farm is 50% (one fruit per stem). Spaces, where fruit can occupy two or more stems, reduce the efficiency and yield. Question-mark blocks indicate that anything could be put in that spotperhaps lighting, or other crops such as wheat, carrots, or potatoes. You may want to cover the water with a slab, a lily pad, or a carpet.

The following grids provide different availabilities for designs of pumpkin and melon farms.
If you just want a quick, compact farm, use design D below. C and D have slightly lower efficiency, but both fit on a "standard farm plot", and are easy to harvest. Of those two, D likely has a faster growth rate due to the separated rows of stalks, but the middle row should not be open dirt/grass or farmland (or more stalks), because any fruit spawned there can tie up two stems. For C, the middle row can be anything except more stalks, for the same reason.
Design A is slightly larger and maximizes space efficiency. It can be tiled for larger farms, but alternate rows should be mirrored top-to-bottom to keep the efficiency. Design B is least efficient but fits in a slightly smaller plot.

Most of the above farms can be tiled to make larger farms, though in some cases, alternate rows or columns of the plots should be flipped for best results. This farm represents an expansion of design A (turned sideways), with the left column of plots reversed (it also shows the farmland border for the whole farm). The basic plots could be repeated further, expanding the farm in units of 99. Note that this design aims to make sure that each fruit occupies only one stem  as it increases in size, the efficiency approaches 49%.

While the above designs all use one layer, the most efficient (49.38%) 99 farm can be created by using two layers. Design is based on design D, and cobblestone indicates spaces that are covered (with dirt) by the layer above.
When replicated over a larger area, design G has spots where you need to jump. Design H avoids that but keeps the same efficiency. For design H, the water source must be placed with care so that it won't spread into the "corridors". However, if there is the usual pit in the bottom layer (and matching hole above), the source block can be placed against one of the upper blocks, or 2 blocks above that layer. The position of the melon stems and dirt/grass/farmland blocks in the two farming layers can be swapped without losing efficiency.

The above layouts are optimized for high spacial efficiency, at the cost of speed. They work best for infrequent harvests, with plenty of time for the field to regrow in between. For frequent harvests, the first following layout may be better suited; if harvested once per day-and-night cycle, it yields about 17 fruits per harvest (as opposed to about 13 fruits for the above designs). The second layout goes even further in that directionit does not use space efficiently but instead gives each stem 24 potential places to spawn a pumpkin or melon, encouraging quicker initial growth at the cost of a clumsier design and reduced long-term yield.

Both melons and pumpkins are broken and dropped when a piston pushes into them. This mechanic can be used to create self harvesting farms. The simplests designs like this push sticky pistons upward into the fruit. Since it is difficult to automatically collect the items when harvested this way, the technique makes for some practical semi automatic designs.

This design uses sticky pistons to push the block the pumpkin or melon is sitting on upward. To save redstone, it is possible to waterlog slabs so that the redstone line can be underneath the water without being washed out.

The following design sacrifices space efficiency in order to fully automate harvesting and allow massive expansion: The tower can be expanded up to the build limit and/or down to bedrock, potentially yielding nearly a thousand growing spaces per tower.
The total area of the farm is 13 blocks by 7 blocks, with an alternating piston and farm layers. Its height is 2 blocks, plus 2 more for each "crop layer" of 8 growing spaces. You need the following materials to make it: 

16 dirt
8 jack-o-lanterns, or glowstone (for lighting)
8 iron
28 Redstone + an extra 10 - 13
At least 50 generic blocks per crop layer, an extra 43 blocks for the build as a whole.
The farmland is hydrated by water flowing down from above. A pressure plate at the end of the collection area on the bottom activates a Redstone torch tower, which in turn activates each piston layer. The harvest falls down the empty middle area into flowing water at the bottom layer and is channeled to the player standing on the pressure plate.
Starting tips:

To speed up collection, place ice blocks under the watercourse.
The farm can be lit from within by glowstone as shown, or much more cheaply by jack o'lanterns. Unfortunately, you can't place a jack-o-lantern directly onto a piston, so if you need to put temporary blocks in place of the pistons, put the jack-o-lanterns on top of those, and then replace the temporary blocks with the pistons.
The pressure plate can be replaced with a hopper or two, leading to a chest or two south of it. Then, the Redstone can be triggered with a switch anywhere along its length. However, a sufficiently tall farm may produce enough goods to overwhelm the hopper (750 itemscall it a dozen stackstake 5 minutes to absorb, so additional stacks may expire. Twenty or so levels of melons could do that, or most of a hundred levels of pumpkins).
See the following steps to build the farm itself:

Start with the base layer, which is a modified farm layer. The farmland squares should be planted with your seeds, while the dirt is where pumpkins or melons grow.
If you are using jack o'lanterns for light, remember the temporary blocks as noted above.
Place a piston layer on top of that. This completes your first crop layer, and for the bare-minimum "tower", you could go on to the cap and water layers from here. More likely, continue to:
Alternate farm and piston layers, as many as you want. Each pair is a crop layer. This is the expandable section, and you are limited only by resources.
After the last piston layer, build the cap layer instead of another farm layer. The black wool indicates temporary blocks (any solid, non-falling block) that you remove after placing the water on the top level.
Last of all, build the top layer, place the water, and mine out those temporary blocks. For the top-most layer, all the water blocks are sources (the Art of the Bucket can assist in filling them quickly).
Schematics:
[Schematic Help]

These farms require no player interaction for the harvesting and collection of pumpkins or melons after being built. Fully automatic farms require pistons and redstone to function and are generally more expensive to build than manual or semi-automatic pumpkin and melon farms.
Farms are triggered automatically in one of three ways.

By a system based on time. You can use either a Redstone/hopper clock or a daylight sensor for this.
By making bud switches, or placing observers, that detect when an adjacent block updates.
Using a simple Redstone circuit that completes when a pumpkin or melon grows.
Pumpkins and melons are collected in a combination of the following.

Water streams
Hoppers
Hopper minecarts.

This farm requires an observer directly above a plant and pistons that activate when the plant moves. These outputs are then taken through a hopper minecart into a chest. This is cheap but harder to build due to the orientations of the pistons and and observers. This is a short video explaining the topic.

These farms send redstone power through the space where a pumpkin or melon can grow. When the block there is opaque, redstone power can pass to next component, triggering a piston to harvest the pumpkin or melon.
These designs made obsolete by the observer. Observer based melon and pumpkin farms are generally easier to make, more compact, and, in some cases, more efficient.

This design requires only 1 piston per pumpkin stem and doesn't require a bud switch. This pumpkin farm fits within a 5x5 area and is relatively simple to build.
Clock designs are superior to this as they allow for better control over the harvesting. It is possible for the two rightmost plants to grow long before the first one does, so more frequent harvesting is desirable.

This melon/pumpkin farm is modular and uses a dropper/hopper combo to detect melon growth. The dropper should contain an item to be dispensed into the hopper, triggering the piston.

This design powers a sticky piston whenever a pumpkin or melon has grown. The sticky piston is used to power a regular piston and break the produce.
This design is tileable and stackable, which could be useful if you want a larger farm. When tileing, the rightmost column can be rotated around the air column behind the lower piston to save space.
When stacking, you may want to run a hopper line beside the redstone repeaters to the bottom so everything can be collected at a central location. It may also be possible to remove hoppers from the upper layers and allow the produce to fall down to the bottom.

The schematic shows half of tileable part of 4-growing-space floor plan. The other half is a north-to-south mirrored copy of the first half, sharing the central slice of hoppers and chests to keep iron cost low (7 hoppers per 4 growing spaces). 
Each growing space has 2 stems beside it. There are 2 rows of farmland between growing spaces, so each stem in the middle has 5 wet farmlands nearby, resulting in better growth rate than if the stem has less than 4 wet farmlands around. The leftmost and rightmost side of the farm should also have 2 rows of 3 farmlands to have the same stem growth rate. Not all of melon slices are collected by the hoppers, but the amount collected is probably good enough.
The second floor is a left-to-right mirror image of first floor, so the upper hopper of the first floor pulls items from the large chest of second floor.

As shown by the schematics below, the design can be varied for early game before slimeballs have been obtained for sticky pistons. It instead uses 2 regular pistons and 2 sands per growing space. However, the height is 6 blocks, 2 times taller than the original design.

This farm is small, has no sticky pistons, and is resource friendly. It uses a BUD switch to determine if a pumpkin/melon has matured and then activates a piston to break it and send it into a hopper.

An observer on top of a melon/pumpkin growing block, looking down, can be used to detect a melon/pumpkin growing. 
The observer also detects the piston arm and the other block moved by the piston to harvest a pumpkin or melon and may cause the piston to extend and retract in a loop if there is no mechanism to prevent it.
An observer on top of the stem inhibits growth, so it cannot be used in this position. 

This design is lag-friendly and uses the observer block to detect grown pumpkins (or melons). It's compact and cheap to build and can be easily expanded.

This design uses a sticky piston to push the observer down to harvest a pumpkin or melon. The piston does not receive power from the direction it faces, so another route is needed to transmit the signal. A slime block is placed between the observer and piston to help extract the observer's signal. The signal is passed through a 2-tick redstone repeater that extends it enough for the sticky piston to pull the slime block and observer back to their original position. 

This farm packs high yield per growing space in a small tile area per growing space (2x2, excluding border and water). All mechanical and circuitry components are above ground and stem level, so the ground can devote to maximize growth rate. Its stacking height is 6 blocks. This design might be bad because the crops aren't picked up by the hopper when they fall on the full dirt blocks. 

For high output per growing space, plant 4 stems (2 pumpkin stems and 2 melon stems) adjacent to the growing space, and surround each stem's root with 6 wet farmlands, so its growth rate is the maximum value (1/3 per random block tick) (1/12 for each available space adjacent to stem). Growing spaces surrounded by 4 such stems have the highest possible output rate per growing space. Potatoes are planted to prevent pumpkin or melon growing on farmland where they they are not wanted. The border of farm surrounding the outer stems should have potatoes on wet farmland too if there is available space. A water block is placed in every 8x8 area. Stems around the water block in the middle of the farm has 5 wet farmland around them, so their growth rate is slightly reduced to 1/4 per random block tick (1/16 for each available space adjacent to the stem). When the farm is extended in the schematic's east-west direction, sharing the leftmost and rightmost redstone dust on the stationary block, 1 pumpkin or melon fruit growing trigger 8 pistons at the same time.

The observer can be used to detect melon/pumpkin growing, or detect the change in the stem when it bears fruit. 

This farm uses observer horizontally, it needs a larger area than vertical observer farm. 
Place 2 stems on farmlands with one air block between the stems. The stems can be melon, pumpkin, or both. 
Beneath the empty air block, place any type of block that a melon/pumpkin can grow on, and behind that space place an observer block. Have the observer be wired up to a regular piston pointing toward the air block and on top of it. Finally, have a hopper beneath it that collects the melons and put it into a chest. This method, however, loops continuously once set off, as the observer sees the piston arm and triggers repeatedly unless there is a mechanism to stop the signal.

In this case, the observer measures the stem instead of the fruit. This makes the farm more compact since there is no need for a mechanism that stops the machine from continuously looping once set off, as the observer sees the piston arm and triggers repeatedly. The farm produces 12-13 melons per minute.

This farm has a high yield per volume. And it takes little resource per growing space when you expand the farm. 
The floor consists of farmlands and dirt in the checkerboard pattern. There are hoppers under farmlands and they are connected to a storage container(s). 
One block of dirt is replaced with water in every 99 area. 
Pumpkin seeds and melon seeds are planted in alternating rows, so their diagonal stem neighbors are of a different kind from themselves. 
On dirt, blocks are air blocks and on these air blocks are pistons facing down. 
On the same level as pistons, jack-o'lanterns are placed over stems and farmlands column. 
The pistons and jack-o'lanterns are in a checkerboard pattern. 
Redstone pulses from clock are sent to one opaque block on piston, then spread through redstone repeaters and redstone dusts, which are on jack-o'lanterns, and more opaque blocks on pistons. 
Appropriate clock cycle period may be around 5-6 seconds or longer. 

This farm's stacking height is 5 blocks. The second floor does not need another clock. It can take signal from redstone torch column and pass it through pulse limiter in the corner like the first floor.
Items from the second floor can be sent down through first floor's water with Minecart with Hopper or chest in the water and Dropper in the Redstone circuit layer with hoppers between them.