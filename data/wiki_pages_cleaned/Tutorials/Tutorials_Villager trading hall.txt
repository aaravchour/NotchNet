This guide shows the player how to create a villager trading hall.

Villager trading halls maximize the number of villagers that can be easily reached. They also provide a way to quickly discard unwanted villagers and replace the ones that are discarded. They can take the form of a literal "hall", with villagers lined up and waiting for the player to trade with them.

There are three parts to a villager trading hall: the input, storage, and output.

The villagers for a trading hall generally come from a villager breeder. A source anywhere else is impractical given the amount of effort exerted to transport villagers out of a village. More advanced designs can include areas for players to reroll trades or permanently reduce their costs by zombifying and curing them.
For a fully automatic system, the mechanism that puts the villager into the hall must be able to close off the cell once the villager enters to prevent more villagers from entering that cell, and to open the next cell to allow for a villager to enter.

Sometimes, the player will want to keep a villager because it has valuable or worthwhile trades. These villagers must be accessed, so they stay in separate "cells" until a better villager comes along; at which point the player may wish to discard them. They must be protected from zombies, lightning, and other things that could bring harm to them. The villagers must also have workstation blocks nearby, so that they can restock their trades.

A villager may come along with undesirable trades, or no trades at all. Also, a better villager might come along that would replace one that already exists in the hall. At this point, the player may wish to discard the villager, and the trading hall must provide a way to do so.
This discarding mechanism must be able to remove the villager from the cell and then open it up to allow for more villagers to drop in.
Once a villager is discarded, it is up to the player to do what they want with them. The most common thing to do is move the discarded villagers into one area, where they are killed by whatever means suits the player. It is not recommended to kill them manually, because that will lower the player's popularity, and if the popularity gets too low, any iron golems of that village become hostile toward that player. An alternative to killing the discarded villagers is to store them for an iron golem farm, put them into a village, or put them to work in farms and breeders.

Once a fresh villager has been placed into their new spot in the hall, it is possible to lock in a trade that is desirable. To lock them in, simply trade with them. If a trade is undesirable, reset trades by breaking and replacing the villager's job block. This can be done as often as needed until a satisfactory trade is offered at a good price. Once a villager has traded once, they will keep that trade forever. If you do not lock them in, their trades will reset every few minutes.

Designs come in all shapes and sizes, but they all have the same basic parts, as described above.

Simple 1.16.100+ design for Bedrock with automatic zombification of individual villagers.

Automated 1.16.100+ design for Bedrock with automatic villager loading from a villager breeder, fast trade re-rolls and automatic zombification of individual villagers.

Java 1.16 design that is extremely easy to build and expand.

Here is a 1.16 design that is super compact, low resource, and infinitely tileable.

                                                                           
Replace the crafting table with the villager's job site block. The wood can be any block you want.

Butcher  Butchers buy raw meat for emeralds, which is useful if you have animal farms. They also buy dried kelp blocks and sweet berries, easy-to-farm items. They sell cooked meat, which is useful if you don't want to use your coal, wood, or lava for cooking food.
Farmer  Farmers buy crops for emeralds. The best starting trades are carrots and potatoes, because using fortune on the crop gives more carrots and potatoes respectively. This doesn't work on wheat or beetroot, as it only drops more seeds. They can also buy pumpkins and melons, which can be farmed automatically without using villagers. The apples some sell at apprentice level can be converted into golden apples, for use in curing villagers or as a defensive panic button for players. Master level farmers will sell golden carrots and glistering melons, providing valuable potion ingredients without the need for players to dip into their own gold reserves.
Fisherman  To a beginning player, a fisherman's trades can be expensive, such as the villager buying coal and string for emeralds. However, they can cook fish for you and sell campfires. A master level fisherman will buy a boat for an emerald, meaning that 2 logs can get you an emerald. Also, 3 emeralds can be used to buy a bucket of cod. A bucket is worth much more than 3 emeralds. They can even sell an enchanted fishing rod.
Librarian  Until you have a good sugarcane farm, the librarian's paper trade won't be worthwhile. However, one librarian can sell up to 3 enchanted books, which can be useful early game. You can enchant tools with an anvil, or disenchant them to get bonus experience. Their utility can last or even increase well into the late game, as their enchanted books can be a renewable source of treasure enchantments or other enchantments that are difficult to obtain consistently, such as Thorns III. At journeyman level they provide an easy source of glass, which a player can take for decoration, or, if they have large enough discounts, craft into panes and bottles and sell to cartographers and clerics respectively at a profit.
Cleric  Clerics sell exotic items, such as redstone, lapis lazuli, glowstone, and bottles of enchanting. They buy rotten flesh, which is a good way of getting rid of your accumulated rotten flesh or if you have a pigman/mob farm. Clerics aren't a very good source of emeralds, especially in the early game, due to the difficulties associated with farming gold and nether wart. Furthermore, selling gold to clerics diverts it from potential use in bartering farms.
Stone Mason  Stone masons buy clay, stone, and other rocks. This is an easy way to get emeralds especially if you have a Silk Touch pickaxe. Quartz is another good item to trade with if you have a Fortune III pickaxe. However, don't trade too much of the decorative stones if you have any use for them, as they are hard to farm until you have a bartering farm since you need quartz to craft they. Clay is farmable relatively easily using mud and dripstone (since 1.19). If you don't have a clay farm or dyes, stone masons can also sell colored or glazed terracotta for decorative use.
Shepherd  Shepherds have one of the cheapest job site blocks. They sell one colored wool for 1 emerald, and you have a chance of getting brown, black, or white wool, which you need to give the villager 18 to get one emerald. Their best use would be buying shears, which cost 2 emeralds. You can also sell dye, which is easy to obtain if you have a large supply of bonemeal or a flower or even squid farm.
Leatherworker  Leatherworkers generally offer bad trades, selling leather armor for an expensive price. However, they will sell a saddle at master level, and they are a good way to offload excess leather, which can be particularly useful if you have cow or hoglin farms which produce it as a byproduct.
Cartographer  Cartographers buy paper and glass panes. Glass panes are easy to get if you have a auto smelter and a highly enchanted shovel. They also sell banner patterns, and explorer maps.
Fletcher  Fletchers are a good source of low-cost emeralds, because fletchers buy 32 sticks for one emerald. That is, four logs crafted into sticks can get you one emerald. They also sell arrows, enchanted bows, and crossbows.
Blacksmith  The three professions below belong in this category. They buy the same things coal, iron, diamond, and lava, and they all sell bells. In the early game they can't be depended on for getting emeralds, since coal and iron are hard to farm, lava is only renewable since 1.17, and diamonds aren't renewable. If you do have an iron farm, however, these villagers can become a strong supplier of emeralds.
Toolsmith  Sells stone, iron, and enchanted diamond tools. They always sell an enchanted diamond pickaxe at master level.
Weaponsmith  Sells iron and enchanted diamond swords and axes.
Armorer  Sells iron, chainmail, and diamond armor. The diamond armor is enchanted, and you will get up to two different pieces. Chainmail boots and helmets cost one emerald. When combined with the fletcher's stick trade, or the fisherman's boat trade, you can convert 2-4 wood logs into iron by selling a boat or 32 sticks for an emerald, then buying chainmail boots/helmet and smelting it into a nugget.

Even though you can simply create long, utilitarian halls with villagers locked up inside, you can design your trading halls to make them look nicer. Here are a few suggestions:

Farmers  Make a barn and build the long hall inside. Give the villagers some crops and farmland. Sort them so you know which villager sells/buys what. You can also give your farmers more freedom, or have your farmer trading location double as an automated crop farm. Have one area with beds, and another area with farmland, crops, and composters. Make sure the villagers buy the crops you want. Break and replace the composter until you get the trade you want. If you traded with that villager, he cannot change his trades. Have private farms outside the farmers' pen, and use those to get crops and sell them for emeralds.
Butchers  Build a butcher's shop. Have a row of smokers and a row of holes for you to trade with them. Build a roof, add counters, and add a chimney. Have item frames with axes/swords (knives) above the holes inside the trading hall. Have animal pens behind of the buildings.
Fishermen  Build multiple docks each with a bed and barrel and bridges connecting them, or you can build one giant dock with many beds/barrels. Make sure the villagers can't fall into water.
Librarians  Build a library. Don't forget your building style. Include rows of bookshelves, chests with book and quills, and most importantly, the librarians. Build the long trading hallway in the library. Use bookshelves and oak fences.
Cleric  Make an exotic items shop with a counter for the clerics. Mushrooms, fungus, chorus trees, or many of the items sold by wandering traders can be used to adorn it. If you really want to go the extra mile you can add pens or cages for brewing-related mobs such as zombies, pufferfish, or turtles, or merely exotic ones such as mooshrooms or striders. Consider including stained glass similar to naturally generated temples. Alternatively, you can build a bar in a restaurant, perhaps with butchers working there too. (Clerics sell Bottles of Enchanting, which look like potions). Don't forget the brewing stands and beds. Make sure the villagers cannot escape.
Stone Mason  Try building mine shacks and have the stone masons work there, or employing them in the blacksmith. (For stone used to make stone tools).
Leatherworkers and Shepherds  Put them in a clothes shop, or have the leatherworker work in a stable (saddles). You can also have shepherds operate a sheep farm.
Cartographer  Build a building with a giant compass on the roof. Make it a map factory, or cover the walls with clones of your maps set in item frames. Thematically this makes a great location for a lodestone. Lock up cartographers and make them trade with you.
Fletcher  This is a great source of emeralds, trading 32 sticks for an emerald, which are very easily obtainable unless you are in a desert. Build a building with a giant bow and arrow symbol. It can be a fletching factory. Have bow/arrow production machines (won't do anything except decoration). You could even try building a connected archery range, with a fenced perimeter and target blocks.
Blacksmith  Build a blacksmith like the one in the village, but much bigger. Have an auto-smelter for decoration, and have smooth stone slab counters. If you have a lot of iron, consider placing one or more anvils. Place the blast furnaces, grindstones, and smithing tables for the villagers to use.